(this["webpackJsonpfinal-task-react-only"]=this["webpackJsonpfinal-task-react-only"]||[]).push([[0],{23:function(e,t,a){e.exports=a(46)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),r=a(13),s=a.n(r),l=a(19),o=a(9),c=(a(28),a(29),a(2)),m=a(3),h=a(10),u=a(5),d=a(4),f=(a(30),a(31),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).el=document.createElement("div"),i.modalRoot=document.getElementById("modal-root"),i}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.modalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.modalRoot.removeChild(this.el)}},{key:"render",value:function(){return s.a.createPortal(this.props.children,this.el)}}]),a}(n.a.Component)),p=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=document.querySelector(".search-comp__search-string");t&&t.value?i.props.onSubmit():i.setState({showModalEmptySearch:!0})},i.handleByTitleClick=function(){i.props.onSearchByChange(!0)},i.handleByDirectorClick=function(){i.props.onSearchByChange(!1)},i.handleCloseModal=function(){i.setState({showModalEmptySearch:!1})},i.handleGoToFavorites=function(){window.location.assign("/favorites")},i.state={showModalEmptySearch:!1},i}return Object(m.a)(a,[{key:"render",value:function(){var e="search-comp__search-by-title",t="search-comp__search-by-director";return this.props.searchByTitle?e+=" search-comp__search-by_selected":t+=" search-comp__search-by_selected",n.a.createElement("div",{className:"search-comp-outer-container"},n.a.createElement("div",{className:"search-comp-inner-container"},n.a.createElement("div",{className:"search-comp__caption1"},"netflixroulette",n.a.createElement("input",{type:"button",className:"search-comp__button",onClick:this.handleGoToFavorites,value:"Go to FAVORITES"})),n.a.createElement("div",{className:"search-comp__caption2"},"FIND YOUR MOVIE"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("input",{type:"text",className:"search-comp__search-string",onChange:this.props.onSearchStringChange,value:this.props.searchString}),n.a.createElement("div",{className:"search-comp__buttom-line"},n.a.createElement("div",null,n.a.createElement("span",{className:"search-comp__search-by-caption"},"SEARCH BY"),n.a.createElement("input",{className:e,type:"button",onClick:this.handleByTitleClick,value:" TITLE "}),n.a.createElement("input",{className:t,type:"button",onClick:this.handleByDirectorClick,value:"DIRECTOR"})),n.a.createElement("div",null,n.a.createElement("input",{className:"search-comp__button",type:"submit",value:"  SEARCH  "})))),this.state.showModalEmptySearch&&n.a.createElement(f,null,n.a.createElement("div",{className:"search-comp__modal-nothing-to-search-background"},n.a.createElement("div",{className:"search-comp__modal-nothing-to-search-outer-container"},"There is nothing to search. Please enter non empty string to search.",n.a.createElement("div",{className:"search-comp__modal-nothing-to-search-button-container"},n.a.createElement("input",{className:"search-comp__modal-nothing-to-search-button",type:"button",value:"CLOSE",onClick:this.handleCloseModal})))))))}}]),a}(n.a.Component),v=a(22);a(32),a(33);function g(e){return n.a.createElement(f,null,n.a.createElement("div",{className:"modal-2-buttons__background"},n.a.createElement("div",{className:"modal-2-buttons__outer-container"},n.a.createElement("div",null,e.message),n.a.createElement("div",{className:"modal-2-buttons__button-container"},n.a.createElement("input",{className:"modal-2-buttons__action-button",type:"button",value:e.actionButtonName,onClick:e.onActionClick}),n.a.createElement("input",{className:"modal-2-buttons__action-button",type:"button",value:"CLOSE",onClick:e.onCloseClick})))))}var y=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).handleOpenModalClick=function(){i.props.flagAddToFavorites?i.setState({showModalAddToFavorites:!0}):i.props.flagRemoveFromFavorites&&i.setState({showModalRemoveFromFavorites:!0})},i.handleAddClick=function(){var e=localStorage.getItem("favoritesArray");if(e){var t=e.split(",");t.includes(""+i.props.id)||localStorage.setItem("favoritesArray",[].concat(Object(v.a)(t),[[i.props.id]]).join(","))}else localStorage.setItem("favoritesArray",[i.props.id].join(","));i.setState({showModalAddToFavorites:!1})},i.handleCloseClick=function(){i.setState({showModalAddToFavorites:!1,showModalRemoveFromFavorites:!1})},i.handleRemoveClick=function(e){var t=localStorage.getItem("favoritesArray");if(t){var a=t.split(",").filter((function(t){return!(Number(t)==Number(e))}));localStorage.setItem("favoritesArray",a.join(","))}i.handleCloseClick(),i.props.refreshFilms()},i.state={showModalAddToFavorites:!1,showModalRemoveFromFavorites:!1},i}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"film-card-comp-container"},n.a.createElement("img",{className:"film-card-comp__poster",src:this.props.posterUrl,alt:"film poster",onClick:this.props.onPosterClick}),n.a.createElement("div",{className:"film-card-comp__line1"},n.a.createElement("span",{className:"film-card-comp__title"},this.props.title),n.a.createElement("span",{className:"film-card-comp__year"},this.props.year)),n.a.createElement("div",{className:"film-card-comp__line2"},n.a.createElement("div",null,this.props.genres," ",n.a.createElement("br",null),"Runtime: ",this.props.runtime," minute ",n.a.createElement("br",null),"Director: ",this.props.director),n.a.createElement("img",{className:"film-card-comp__star",src:"/img/favorites_star.ico",alt:"star",onClick:this.handleOpenModalClick})),this.state.showModalAddToFavorites&&n.a.createElement(g,{message:'Add film "'.concat(this.props.title,'" by "').concat(this.props.director,'" to favorites?'),actionButtonName:"ADD",onActionClick:this.handleAddClick,onCloseClick:this.handleCloseClick}),this.state.showModalRemoveFromFavorites&&n.a.createElement(g,{message:'Remove film "'.concat(this.props.title,'" by "').concat(this.props.director,'" from favorites?'),actionButtonName:"REMOVE",onActionClick:function(){return e.handleRemoveClick(e.props.id)},onCloseClick:this.handleCloseClick}))}}]),a}(n.a.Component),E=(a(34),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"handlePosterClick",value:function(e){window.location.href="/film/".concat(e)}},{key:"render",value:function(){var e=this,t=this.props.filmList.map((function(t){return n.a.createElement(y,{key:t.id,id:t.id,posterUrl:t.posterUrl,year:t.year,genres:t.genres.toString(),title:t.title,director:t.director,runtime:t.runtime,onPosterClick:function(){return e.handlePosterClick(t.title)},flagAddToFavorites:e.props.flagAddToFavorites,flagRemoveFromFavorites:e.props.flagRemoveFromFavorites,refreshFilms:e.props.refreshFilms})}));return n.a.createElement("div",{className:"film-list-outer-container"},n.a.createElement("div",{className:"film-list-inner-container"},this.props.renderFirstLine,n.a.createElement("div",{className:"film-list-comp__list"},t)))}}]),a}(n.a.Component));a(35);function S(e){return n.a.createElement("div",{className:"footer-comp-outer-container"},n.a.createElement("div",{className:"footer-comp-inner-container"},"netflixroulette"))}a(36);function b(e){return e.isLoading?n.a.createElement(f,null,n.a.createElement("div",{className:"spinner-comp-background"},n.a.createElement("img",{src:"/img/load.gif",alt:"spinner"}))):null}function _(e){var t=e.searchString,a=e.searchArray,i=e.byTitle,n=e.byDirector,r=e.byID;return fetch("https://my-json-server.typicode.com/michael-916310/my-json-server/movies").then((function(e){if(e.ok)return e.json();throw new Error("Fetching data-wrong response-status:".concat(e.status))})).then((function(e){return e})).catch((function(e){return console.log(e)})).then((function(e){return e.filter((function(e){var s;if(i)s=e.title.toUpperCase();else{if(!n)return!!r&&(s=e.id,a.includes(s));s=e.director.toUpperCase()}return s.includes(t.toUpperCase())}))}))}a(37);var C=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var i;Object(c.a)(this,a),(i=t.call(this,e)).URLFilm=e.match.params.filmName;var n=new URL(window.location.href);return n.searchParams.has("searchByTitle")?(i.URLSearchByTitle=Boolean(n.searchParams.get("searchByTitle")),console.log("get",Boolean(n.searchParams.get("searchByTitle")))):(i.URLSearchByTitle=!0,console.log("has",!n.searchParams.has("searchByTitle"))),console.log("URLSearchByTitle:".concat(i.URLSearchByTitle)),i.state={searchString:i.URLFilm,searchByTitle:i.URLSearchByTitle,filmList:[],isLoading:!1},i.handleSearchStringChange=i.handleSearchStringChange.bind(Object(h.a)(i)),i.handleSearchByChange=i.handleSearchByChange.bind(Object(h.a)(i)),i.handleSearch=i.handleSearch.bind(Object(h.a)(i)),i.handleSortByRuntime=i.handleSortByRuntime.bind(Object(h.a)(i)),i.handleSortByDate=i.handleSortByDate.bind(Object(h.a)(i)),i}return Object(m.a)(a,[{key:"handleSearchStringChange",value:function(e){this.setState({searchString:e.target.value})}},{key:"handleSearchByChange",value:function(e){this.setState({searchByTitle:e})}},{key:"loadFilmListToState",value:function(){var e=this;this.setState({isLoading:!0}),_({searchString:this.state.searchString,byTitle:this.state.searchByTitle,byDirector:!this.state.searchByTitle}).then((function(t){e.setState({filmList:t,isLoading:!1})}))}},{key:"handleSearch",value:function(){if(this.URLFilm!==this.state.searchString||this.URLSearchByTitle!==this.state.searchByTitle){var e=new URL("/search/".concat(this.state.searchString),window.location.origin);e.searchParams.set("searchByTitle",this.state.searchByTitle?1:""),window.location.assign(e)}}},{key:"sortFilms",value:function(e){var t;t=e?function(e,t){return+e.year>+t.year?-1:1}:function(e,t){return+e.runtime>+t.runtime?-1:1};var a=this.state.filmList.sort(t);this.setState({filmList:a})}},{key:"handleSortByRuntime",value:function(e){e.preventDefault(),this.sortFilms(!1)}},{key:"handleSortByDate",value:function(e){e.preventDefault(),this.sortFilms(!0)}},{key:"renderFistLine",value:function(){var e;return this.state.filmList.length&&(e=n.a.createElement(i.Fragment,null,n.a.createElement("div",{className:"film-list-comp__top-line"},n.a.createElement("div",null,this.state.filmList.length," movies found"),n.a.createElement("div",null,"SORT BY",n.a.createElement("a",{className:"film-list-comp__sort-by-release-date",href:"#",onClick:this.handleSortByDate},"release date"),n.a.createElement("a",{className:"film-list-comp__sort-by-runtime",href:"#",onClick:this.handleSortByRuntime},"runtime"))))),e}},{key:"componentDidMount",value:function(){this.state.searchString&&this.loadFilmListToState()}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"search-page-header"},n.a.createElement(p,{searchString:this.state.searchString,searchByTitle:this.state.searchByTitle,onSearchStringChange:this.handleSearchStringChange,onSubmit:this.handleSearch,onSearchByChange:this.handleSearchByChange})),n.a.createElement("div",{className:"search-page-result"},this.state.filmList.length?n.a.createElement(E,{renderFirstLine:this.renderFistLine(),filmList:this.state.filmList,flagAddToFavorites:!0}):n.a.createElement("div",{className:"search-page-empty-result"},"No films found")),n.a.createElement("div",{className:"search-page-footer"},n.a.createElement(S,null)),n.a.createElement(b,{isLoading:this.state.isLoading}))}}]),a}(n.a.Component);a(38);function N(e){return n.a.createElement("div",{className:"film-detail-comp-outer-container"},n.a.createElement("div",{className:"film-detail-comp-inner-container"},n.a.createElement("div",{className:"film-detail-comp__first-line"},n.a.createElement("div",{className:"film-detail-comp__first-line-caption"},"netflixroulette"),n.a.createElement("div",null,n.a.createElement("input",{className:"film-detail-comp__first-line-button",type:"button",value:"Go to SEARCH",onClick:function(){window.location.href="/search/".concat(e.director,"?searchByTitle=")}}),n.a.createElement("input",{className:"film-detail-comp__first-line-button",type:"button",value:"Go to FAVORITES",onClick:function(){window.location.assign("/favorites")}}))),n.a.createElement("div",{className:"film-detail-comp__totall-details-container"},n.a.createElement("div",{className:"film-detail-comp__poster"},n.a.createElement("img",{className:"film-detail-comp__poster-img",src:e.posterUrl,alt:"POSTER IMAGE"})),n.a.createElement("div",{className:"film-detail-comp__details"},n.a.createElement("div",{className:"film-detail-comp__title"},e.title),n.a.createElement("div",{className:"film-detail-comp__year"},e.year," ",e.runtime," min"),n.a.createElement("div",{className:"film-detail-comp__plot"},e.plot),n.a.createElement("div",{className:"film-detail-comp__director"},"Director: ",e.director),n.a.createElement("div",{className:"film-detail-comp__actors"},"Cast: ",e.actors)))))}a(39);var k=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).state={filmTitle:e.match.params.filmName,filmDesc:{posterUrl:"",title:"",year:"",runtime:"",plot:"",director:"",actors:""},filmList:[],isLoading:!1},i}return Object(m.a)(a,[{key:"getFilmDesc",value:function(){var e=this;if(this.state.filmTitle)return this.setState({isLoading:!0}),_({searchString:this.state.filmTitle,byTitle:!0}).then((function(t){Array.isArray(t)&&1===t.length&&e.setState({filmDesc:{posterUrl:t[0].posterUrl,title:t[0].title,year:t[0].year,runtime:t[0].runtime,plot:t[0].plot,director:t[0].director,actors:t[0].actors},isLoading:!1})}))}},{key:"getFilmListByDirector",value:function(){var e=this;if(this.state.filmDesc.director)return this.setState({isLoading:!0}),_({searchString:this.state.filmDesc.director,byDirector:!0}).then((function(t){t.length>0&&e.setState({filmList:t,isLoading:!1})}))}},{key:"componentDidMount",value:function(){var e=this;this.getFilmDesc().then((function(){e.getFilmListByDirector()}))}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"film-page-header"},n.a.createElement(N,{posterUrl:this.state.filmDesc.posterUrl,title:this.state.filmDesc.title,year:this.state.filmDesc.year,runtime:this.state.filmDesc.runtime,plot:this.state.filmDesc.plot,director:this.state.filmDesc.director,actors:this.state.filmDesc.actors})),n.a.createElement("div",{className:"film-page-content"},n.a.createElement(E,{renderFirstLine:n.a.createElement("div",null,"Films by ",this.state.filmDesc.director," "),filmList:this.state.filmList,flagAddToFavorites:!0})),n.a.createElement("div",{className:"film-page-footer"},n.a.createElement(S,null)),n.a.createElement(b,{isLoading:this.state.isLoading}))}}]),a}(n.a.Component),F=(a(40),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).getFavoritesArray=function(){var e=localStorage.getItem("favoritesArray"),t=[];return e&&(t=e.split(",")),t.map((function(e){return+e}))},i.loadFilmById=function(e){_({searchArray:e,byID:!0}).then((function(e){i.setState({favoritesList:e})}))},i.refreshFilms=function(){i.loadFilmById(i.getFavoritesArray())},i.state={favoritesList:[]},i}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadFilmById(this.getFavoritesArray())}},{key:"handleGoToSerach",value:function(){window.location.assign("/search")}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"favorites-page-header"},n.a.createElement("div",{className:"favorites-page-outer-container"},n.a.createElement("div",{className:"favorites-page-inner-container"},n.a.createElement("div",{className:"favorites-page-container"},n.a.createElement("div",{className:"favorites-page-caption"},"YOUR FAVORITES FILMS"),n.a.createElement("div",null,n.a.createElement("input",{type:"button",className:"favorites-page-button",onClick:this.handleGoToSerach,value:"go to SEARCH"})))))),n.a.createElement("div",{className:"favorites-page-film-list"},0===this.state.favoritesList.length?n.a.createElement("div",{className:"favorites-page-empty-result"},"No films added to favorites"):n.a.createElement(E,{filmList:this.state.favoritesList,flagRemoveFromFavorites:!0,refreshFilms:this.refreshFilms})),n.a.createElement("div",{className:"favorites-page-fotter"},n.a.createElement(S,null)))}}]),a}(n.a.Component));var L=function(){return n.a.createElement("div",{className:"application-container"},n.a.createElement(l.a,null,n.a.createElement(o.c,null,n.a.createElement(o.a,{path:"/search/:filmName",component:C}),n.a.createElement(o.a,{path:"/film/:filmName",component:k}),n.a.createElement(o.a,{path:"/favorites",component:F}),n.a.createElement(o.a,{path:"/",component:C}))))};s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(L,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.b705ebc1.chunk.js.map